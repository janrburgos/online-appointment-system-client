(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),i=a(19),r=a.n(i),s=(a(39),a(6)),o=(a(40),a(2)),l=(a(41),a(4)),d=a(8),p=a(9),j=a(3),u=a.n(j),m=a(0),b=function(e){var t=e.role,a=Object(d.f)(),c=Object(l.b)(),i=Object(n.useState)(""),r=Object(o.a)(i,2),s=r[0],j=r[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),O=h[0],x=h[1],v=Object(n.useState)(""),f=Object(o.a)(v,2),g=f[0],N=f[1],y=Object(n.useRef)(null),S=Object(n.useRef)(null),I=function(e,t){return N(""),""===s.trim()?(y.current.focus(),N("Enter an email address")):""===O.trim()?(S.current.focus(),N("Enter a password")):void u()("https://online-appointment-system-be.herokuapp.com/api/".concat(e,"s/").concat(s)).then((function(e){return void 0===e.data[0]?(y.current.focus(),N("This email address is not registered")):e.data[0].password!==O?(S.current.focus(),N("This password is incorrect")):void t(e.data[0])}))},w=function(e){u()("https://online-appointment-system-be.herokuapp.com/api/doctypes").then((function(e){c({type:"INSERT_DOCTYPES",payload:e.data}),localStorage.setItem("doctypes",JSON.stringify(e.data))})),u()("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(e._id)).then((function(e){c({type:"INSERT_APPLICATIONS",payload:e.data}),localStorage.setItem("applications",JSON.stringify(e.data))})),u()("https://online-appointment-system-be.herokuapp.com/api/documents/".concat(e._id)).then((function(e){c({type:"INSERT_DOCUMENTS",payload:e.data}),localStorage.setItem("documents",JSON.stringify(e.data))})),c({type:"INSERT_APPLICANT_INFO",payload:e}),localStorage.setItem("applicantInfo",JSON.stringify(e)),c({type:"EDIT_HIGHLIGHTED_NAV",payload:"profile"}),localStorage.setItem("highlightedNav","profile"),a.push("/main")},D=function(e){u()("https://online-appointment-system-be.herokuapp.com/api/applications/review/pending").then((function(e){c({type:"INSERT_PENDING_APPLICATIONS",payload:e.data}),localStorage.setItem("pendingApplications",JSON.stringify(e.data))})).then((function(){a.push("/reviewer/main")}))},A=function(){I(t,"applicant"===t?w:D)};return Object(m.jsxs)("div",{className:"LoginPage",children:[Object(m.jsxs)("div",{className:"login-box",children:[Object(m.jsx)("p",{className:"title",children:"Sign in to your account"}),Object(m.jsx)("span",{className:"login-error",children:g}),Object(m.jsx)("input",{type:"email",name:"email-login",id:"email-login",placeholder:"Email Address",value:s,onChange:function(e){j(e.target.value)},ref:y,onKeyDown:function(e){return"Enter"===e.key?S.current.focus():null}}),Object(m.jsx)("input",{type:"password",name:"password-login",id:"password-login",placeholder:"Password",value:O,onChange:function(e){x(e.target.value)},ref:S,onKeyDown:function(e){return"Enter"===e.key?A():null}}),Object(m.jsx)("button",{className:"login-button",onClick:A,children:"Log In"}),Object(m.jsx)("small",{onClick:function(){"password"===S.current.type?S.current.type="text":S.current.type="password"},children:"Show/Hide password"})]}),"applicant"===t&&Object(m.jsxs)("p",{className:"register-message",children:["Don't have an account?\xa0",Object(m.jsx)(p.b,{to:"/register",children:Object(m.jsx)("span",{children:"Register here"})})]})]})},h=(a(66),function(){for(var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),r=Object(o.a)(i,2),s=r[0],l=r[1],p=Object(n.useState)(""),j=Object(o.a)(p,2),b=j[0],h=j[1],O=Object(n.useState)(""),x=Object(o.a)(O,2),v=x[0],f=x[1],g=Object(n.useState)(""),N=Object(o.a)(g,2),y=N[0],S=N[1],I=Object(n.useState)(""),w=Object(o.a)(I,2),D=w[0],A=w[1],C=Object(n.useState)("male"),T=Object(o.a)(C,2),_=T[0],k=T[1],R=Object(n.useState)("01"),E=Object(o.a)(R,2),P=E[0],L=E[1],F=Object(n.useState)("01"),Y=Object(o.a)(F,2),q=Y[0],M=Y[1],H=Object(n.useState)((new Date).getFullYear().toString()),U=Object(o.a)(H,2),G=U[0],J=U[1],V=Object(n.useState)("single"),z=Object(o.a)(V,2),B=z[0],K=z[1],Q=Object(n.useState)("Filipino"),W=Object(o.a)(Q,2),X=W[0],Z=W[1],$=Object(n.useState)(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(o.a)(ne,2),ie=ce[0],re=ce[1],se=Object(n.useState)(""),oe=Object(o.a)(se,2),le=oe[0],de=oe[1],pe=Object(n.useState)(""),je=Object(o.a)(pe,2),ue=je[0],me=je[1],be=Object(n.useRef)(null),he=Object(n.useRef)(null),Oe=Object(n.useRef)(null),xe=Object(d.f)(),ve=(new Date).getFullYear(),fe=[],ge=0;ge<ve-1920;ge++)fe.push(ve-ge);var Ne=[];if("02"===q&&G%4===0){Ne=[];for(var ye=0;ye<29;ye++)Ne.push("".concat(ye+1))}else if("02"===q){Ne=[];for(var Se=0;Se<28;Se++)Ne.push("".concat(Se+1))}else if("04"===q||"06"===q||"09"===q||"11"===q){Ne=[];for(var Ie=0;Ie<30;Ie++)Ne.push("".concat(Ie+1))}else{Ne=[];for(var we=0;we<31;we++)Ne.push("".concat(we+1))}return Object(m.jsxs)("div",{className:"RegistrationPage",children:[Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-email",children:"email address"}),Object(m.jsx)("input",{type:"email",id:"reg-email",onChange:function(e){c(e.target.value)},value:a,ref:be})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-password",children:"password"}),Object(m.jsx)("input",{type:"password",id:"reg-password",onChange:function(e){l(e.target.value)},value:s,ref:he})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-mobile-number",children:"mobile number +63"}),Object(m.jsx)("input",{type:"number",id:"reg-mobile-number",onChange:function(e){return h(e.target.value)},value:b,ref:Oe})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-first-name",children:"first name"}),Object(m.jsx)("input",{type:"text",id:"reg-first-name",onChange:function(e){f(e.target.value)},value:v})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-middle-name",children:"middle name"}),Object(m.jsx)("input",{type:"text",id:"reg-middle-name",onChange:function(e){S(e.target.value)},value:y})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-last-name",children:"last name"}),Object(m.jsx)("input",{type:"text",id:"reg-last-name",onChange:function(e){A(e.target.value)},value:D})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-gender",children:"gender"}),Object(m.jsxs)("select",{name:"reg-gender",id:"reg-gender",value:_,onChange:function(e){return k(e.target.value)},children:[Object(m.jsx)("option",{value:"male",children:"male"}),Object(m.jsx)("option",{value:"female",children:"female"})]})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-birth-date",children:"birth date"}),Object(m.jsxs)("div",{className:"birth-date-group",children:[Object(m.jsx)("select",{name:"birth-day",id:"birth-day",value:P,onChange:function(e){return L(e.target.value)},children:Ne.map((function(e,t){return Object(m.jsx)("option",{value:t+1<10?"0".concat(t+1):t+1,children:e},"".concat(e,"-option"))}))}),Object(m.jsx)("select",{name:"birth-month",id:"birth-month",value:q,onChange:function(e){return M(e.target.value)},children:["january","february","march","april","may","june","july","august","september","october","november","december"].map((function(e,t){return Object(m.jsx)("option",{value:t+1<10?"0".concat(t+1):t+1,children:e},"".concat(e,"-option"))}))}),Object(m.jsx)("select",{name:"birth-year",id:"birth-year",value:G,onChange:function(e){return J(e.target.value)},children:fe.map((function(e){return Object(m.jsx)("option",{value:e,children:e},"".concat(e,"-option"))}))})]})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-civil-status",children:"civil status"}),Object(m.jsxs)("select",{name:"civil-status",id:"civil-status",value:B,onChange:function(e){return K(e.target.value)},children:[Object(m.jsx)("option",{value:"single",children:"single"}),Object(m.jsx)("option",{value:"married",children:"married"}),Object(m.jsx)("option",{value:"annulled",children:"annulled"}),Object(m.jsx)("option",{value:"divorced",children:"divorced"}),Object(m.jsx)("option",{value:"widowed",children:"widowed"})]})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-citizenship",children:"citizenship"}),Object(m.jsx)("input",{type:"text",id:"reg-citizenship",onChange:function(e){Z(e.target.value)},value:X})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-place-of-birth",children:"place of birth"}),Object(m.jsx)("input",{type:"text",id:"reg-place-of-birth",onChange:function(e){ae(e.target.value)},value:te})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-current-address",children:"current address"}),Object(m.jsx)("input",{type:"text",id:"reg-current-address",onChange:function(e){re(e.target.value)},value:ie})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-permanent-address",children:"permanent address"}),Object(m.jsx)("input",{type:"text",id:"reg-permanent-address",onChange:function(e){de(e.target.value)},value:le})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("div",{}),Object(m.jsx)("button",{onClick:function(){!function(){if(me(""),""===a.trim()||""===s.trim()||""===b.trim()||""===v.trim()||""===y.trim()||""===D.trim()||""===X.trim()||""===te.trim()||""===ie.trim()||""===le.trim())return me("Do not leave any items blank");if(-1===a.indexOf("@")||-1===a.indexOf("."))return be.current.focus(),me("Enter a valid email address");if(s.length<4)return he.current.focus(),me("Password should have at least 4 characters");if(10!==b.length)return Oe.current.focus(),me("Mobile number input must be equal to 10 numbers");var e={email:a.trim(),password:s,mobileNumber:b.trim(),firstName:v.trim().toLowerCase(),middleName:y.trim().toLowerCase(),lastName:D.trim().toLowerCase(),gender:_,birthDate:"".concat(G).concat(q).concat(P),civilStatus:B,citizenship:X.trim().toLowerCase(),placeOfBirth:te.trim().toLowerCase(),currentAddress:ie.trim().toLowerCase(),permanentAddress:le.trim().toLowerCase()};u()("https://online-appointment-system-be.herokuapp.com/api/applicants/".concat(a)).then((function(t){if(void 0!==t.data[0])return me("The email address you provided is already registered");u.a.post("https://online-appointment-system-be.herokuapp.com/api/applicants",e).then(alert("added ".concat(v," ").concat(D," to the database"))),xe.push("/")}))}()},children:"Register"})]})]}),Object(m.jsx)("div",{className:"registration-error",children:ue})]})}),O=(a(67),a(68),a(7)),x=a.n(O),v=function(){var e=Object(l.c)((function(e){return e.applicantInfoReducer.applicantInfo}));return Object(m.jsxs)("section",{className:"ProfileTab",children:[Object(m.jsxs)("div",{className:"personal-info",children:[Object(m.jsx)("p",{className:"inner-header",children:"personal information"}),Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"name"}),Object(m.jsx)("td",{children:"".concat(e.firstName," ").concat(e.middleName," ").concat(e.lastName)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"gender"}),Object(m.jsx)("td",{children:e.gender})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"birth date"}),Object(m.jsx)("td",{children:x()(e.birthDate).format("MMMM DD, YYYY")})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"civil status"}),Object(m.jsx)("td",{children:e.civilStatus})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"citizenship"}),Object(m.jsx)("td",{children:e.citizenship})]})]})})]}),Object(m.jsxs)("div",{className:"personal-address",children:[Object(m.jsx)("p",{className:"inner-header",children:"personal address"}),Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"place of birth"}),Object(m.jsx)("td",{children:e.placeOfBirth})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"current address"}),Object(m.jsx)("td",{children:e.currentAddress})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"permanent address"}),Object(m.jsx)("td",{children:e.permanentAddress})]})]})})]}),Object(m.jsxs)("div",{className:"contact-info",children:[Object(m.jsx)("p",{className:"inner-header",children:"contact information"}),Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"email address"}),Object(m.jsx)("td",{className:"contact-info-email",children:e.email})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"contact number"}),Object(m.jsx)("td",{children:"+63".concat(e.mobileNumber)})]})]})})]})]})},f=(a(70),function(){var e=Object(l.c)((function(e){return e.documentsReducer.documents}));return Object(m.jsxs)("section",{className:"DocumentsTab",children:[Object(m.jsx)("p",{className:"inner-header",children:"documents tab"}),0===e.length&&Object(m.jsx)("div",{className:"empty-tab",children:"no documents uploaded..."}),Object(m.jsx)("div",{className:"documents-grid",children:e.map((function(e){return Object(m.jsxs)("div",{className:"document-box",children:[Object(m.jsx)("p",{children:e.docType}),Object(m.jsx)("img",{src:e.documentUrl,alt:"document"})]},"documents-grid-".concat(e.documentUrl))}))})]})}),g=(a(71),a(72),function(e){var t=Object(l.b)(),a=Object(n.useRef)(null),c=Object(n.useState)(e.application),i=Object(o.a)(c,2),r=i[0],s=i[1];return Object(m.jsx)("div",{className:"ApplicationItem",children:Object(m.jsxs)("div",{className:"application-card",children:[Object(m.jsxs)("div",{className:"application-buttons",children:[Object(m.jsx)(p.b,{to:{pathname:"".concat("applicant"===e.role?"/main/applications/".concat(r._id,"/0"):"/reviewer/applications/".concat(r._id,"/0")),state:{application:r,role:e.role}},onClick:function(){localStorage.setItem("selectedDocumentIndex",0),localStorage.setItem("application",JSON.stringify(r)),"reviewer"===e.role&&u()("https://online-appointment-system-be.herokuapp.com/api/applicants/id/".concat(e.application.applicantId)).then((function(e){t({type:"INSERT_APPLICANT_INFO",payload:e.data[0]}),localStorage.setItem("applicantInfo",JSON.stringify(e.data[0]))}))},children:Object(m.jsx)("button",{children:"view details"})}),"applicant"===e.role&&Object(m.jsxs)("div",{className:"receipt-button",children:["accepted"!==r.paymentStatus&&Object(m.jsx)("input",{type:"file",id:"payment-receipt",accept:"image/*",ref:a,onInput:function(){return function(e){var t=a.current.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){u.a.post("https://online-appointment-system-be.herokuapp.com/api/upload/receipt",{data:n.result}).then((function(t){u.a.put("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(e),{paymentReceiptUrl:t.data,paymentStatus:"pending"}).then((function(e){s(e.data)}))}))}}(r._id)}}),"-"===r.paymentStatus||"rejected"===r.paymentStatus?Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"left-arrow",children:"\u2190"}),Object(m.jsx)("span",{className:"up-arrow",children:"\u2191"})," Upload Your Receipt"]}):Object(m.jsx)("div",{children:"Receipt Uploaded! "})]})]}),Object(m.jsxs)("div",{className:"application-middle",children:[Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Transaction Document:"}),Object(m.jsx)("td",{children:r.transactionDocument})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Transaction Date:"}),Object(m.jsx)("td",{children:x()(r.transactionDate).format("MMMM Do YYYY, h:mm:ss A")})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Transaction Status:"}),Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:r.transactionStatus})})]})]})}),Object(m.jsx)("div",{className:"table-divider"}),Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Amount:"}),Object(m.jsxs)("td",{children:["php ",r.amount,".00"]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Payment Status:"}),Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:r.paymentStatus})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Appointment Date:"}),Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"-"===r.appointmentDate?"-":x()(r.appointmentDate).format("MMMM Do YYYY")})})]})]})})]})]})})}),N=function(e){var t=e.role,a=Object(d.f)(),n=Object(l.c)((function(e){return e.applicationsReducer.applications})),c=Object(l.c)((function(e){return e.pendingApplicationsReducer.pendingApplications}));return Object(m.jsxs)("section",{className:"ApplicationsTab",children:["applicant"===t?Object(m.jsx)("p",{className:"inner-header",children:"application history"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{className:"reviewer-logout",onClick:function(){localStorage.removeItem("pendingApplications"),localStorage.removeItem("selectedDocumentIndex"),localStorage.removeItem("application"),localStorage.removeItem("applicantInfo"),a.push("/reviewer")},children:"Logout"}),Object(m.jsx)("p",{className:"inner-header",children:"pending applications"})]}),Object(m.jsxs)("div",{className:"application-history",children:[0===n.length&&"applicant"===t&&Object(m.jsx)("div",{className:"empty-tab",children:"no applications..."}),0===c.length&&"reviewer"===t&&Object(m.jsx)("div",{className:"empty-tab",children:"no pending applications..."}),"applicant"===t?n.map((function(e){return Object(m.jsx)(g,{application:e,role:t},"applicationitem-".concat(e._id))})):c.map((function(e){return Object(m.jsx)(g,{application:e,role:t},"applicationitem-".concat(e._id))}))]})]})},y=a(12),S=(a(73),a(74),function(e){var t=["january","february","march","april","may","june","july","august","september","october","november","december"],a=[x()().year(),x()().add(1,"years").year(),x()().add(2,"years").year()],c=Object(n.useState)([]),i=Object(o.a)(c,2),r=i[0],s=i[1],l=Object(n.useState)(x()().year()),d=Object(o.a)(l,2),p=d[0],j=d[1],u=Object(n.useState)(t[x()().month()]),b=Object(o.a)(u,2),h=b[0],O=b[1],v=Object(n.useState)([]),f=Object(o.a)(v,2),g=f[0],N=f[1],y=Object(n.useState)(x()().date()),S=Object(o.a)(y,2),I=S[0],w=S[1];return Object(n.useEffect)((function(){var e=function(e){for(var a=[],n=0;n<e;n++){var c=n<9?"0".concat(n+1):n+1;if(0!==x()("".concat(p).concat(h).concat(c)).day()&&6!==x()("".concat(p).concat(h).concat(c)).day())if(n<x()().date()+1){if(x()().month()===t.indexOf(h)&&x()().year()===p)continue;a.push(n+1)}else a.push(n+1)}s(a)};e("february"===h&&p%4===0?29:"february"===h?28:"april"===h||"june"===h||"september"===h||"november"===h?30:31)}),[h,p]),Object(n.useEffect)((function(){p===x()().year()?(N(t.slice(x()().month())),t.indexOf(h)<x()().month()&&O(t[x()().month()])):N(t)}),[p]),Object(n.useEffect)((function(){-1===r.indexOf(I)&&w(r[0])}),[r]),Object(m.jsxs)("div",{className:"SetAppointmentDate",children:[Object(m.jsxs)("div",{className:"date-select-group",children:[Object(m.jsx)("select",{name:"year",id:"year",value:p,onChange:function(e){return j(Number(e.target.value))},children:a.map((function(e){return Object(m.jsx)("option",{value:e,children:e},"option-appointment-".concat(e))}))}),Object(m.jsx)("select",{name:"month",id:"month",value:h,onChange:function(e){return O(e.target.value)},children:g.map((function(e){return Object(m.jsx)("option",{value:e,children:e},"option-appointment-".concat(e))}))}),Object(m.jsx)("select",{name:"day",id:"day",value:I,onChange:function(e){return w(e.target.value)},children:r.map((function(e){return Object(m.jsx)("option",{value:e,children:e},"option-appointment-".concat(e))}))})]}),Object(m.jsx)("button",{onClick:function(){var a=t.indexOf(h)+1,n=I<10?"0".concat(I):I;a=a<10?"0".concat(a):a,e.setAppointmentDateHandler("".concat(p).concat(a).concat(n))},children:"set appointment date"})]})}),I=function(){var e=Object(d.g)(),t=Object(d.f)(),a=Object(l.b)(),c=Object(n.useState)(Object(s.a)({},e.state.application)),i=Object(o.a)(c,2),r=i[0],j=i[1],b=Object(l.c)((function(e){return e.applicantInfoReducer.applicantInfo})),h=Object(n.useState)(Number(localStorage.getItem("selectedDocumentIndex"))),O=Object(o.a)(h,2),v=O[0],f=O[1],g=Object(n.useState)("accepted"),N=Object(o.a)(g,2),I=N[0],w=N[1],D=Object(n.useState)("set appointment date"),A=Object(o.a)(D,2),C=A[0],T=A[1],_=Object(n.useState)("-"),k=Object(o.a)(_,2),R=k[0],E=k[1],P=Object(n.useRef)(null),L=function(){u()("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(b._id)).then((function(e){a({type:"INSERT_APPLICATIONS",payload:e.data}),localStorage.setItem("applications",JSON.stringify(e.data))}))};return Object(m.jsxs)("section",{className:"ApplicationDetailTab ".concat("reviewer"===e.state.role?"ReviewerDetailTab":null),children:["reviewer"===e.state.role&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"reviewer-back-button",children:Object(m.jsx)("button",{onClick:function(){t.push("/reviewer/main")},children:"Back to pending applications"})}),Object(m.jsxs)("div",{className:"applicant-main-top",children:[Object(m.jsx)("div",{className:"avatar-container",children:Object(m.jsx)("img",{src:b.avatar,alt:"avatar"})}),Object(m.jsxs)("div",{className:"primary-info",children:[Object(m.jsx)("div",{className:"applicant-name",children:"".concat(b.firstName," ").concat(b.middleName," ").concat(b.lastName)}),Object(m.jsx)("div",{className:"applicant-email",children:b.email}),Object(m.jsx)("div",{className:"applicant-number",children:b.applicantNumber})]})]})]}),Object(m.jsxs)("div",{className:"application-detail-top",children:[Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Transaction Document:"}),Object(m.jsx)("td",{children:r.transactionDocument})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Transaction Date:"}),Object(m.jsx)("td",{children:x()(r.transactionDate).format("MMMM Do YYYY, h:mm:ss A")})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Transaction Status:"}),Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:r.transactionStatus})})]})]})}),Object(m.jsx)("div",{className:"table-divider"}),Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Amount:"}),Object(m.jsxs)("td",{children:["php ",r.amount,".00"]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Payment Status:"}),Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:r.paymentStatus})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Appointment Date:"}),Object(m.jsx)("td",{children:Object(m.jsx)("b",{children:"-"===r.appointmentDate?"-":x()(r.appointmentDate).format("MMMM Do YYYY")})})]})]})})]}),"applicant"===e.state.role&&"set appointment date"===r.transactionStatus&&Object(m.jsx)(S,{setAppointmentDateHandler:function(e){u.a.put("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(r._id),{transactionStatus:"to claim document",appointmentDate:e}).then((function(e){j(e.data),localStorage.setItem("application",JSON.stringify(e.data)),L(),alert("Apointment date has been set")})),u.a.post("https://online-appointment-system-be.herokuapp.com/api/documents",{applicantId:r.applicantId,docType:r.transactionDocument,documentUrl:"https://res.cloudinary.com/janrcloud/image/upload/v1624704185/online-appointment-system/Uploads/pdf-logo.svg",dateUploaded:Date.now()}),u.a.post("https://online-appointment-system-be.herokuapp.com/api/createdoc",{folderName:x()(Date.now()).format("YYYY-MM-DD"),fileName:"".concat(b.applicantNumber,"-").concat(r.transactionDocument,"-").concat(Date.now()),documentName:r.transactionDocument,applicantInfo:b})}}),Object(m.jsxs)("div",{className:"application-detail-bottom",children:[Object(m.jsx)("div",{className:"requirement-list",children:Object(m.jsxs)("ul",{children:[r.transactionRequirements.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(p.b,{to:{pathname:"".concat("applicant"===e.state.role?"/main/applications/".concat(r._id,"/").concat(a):"/reviewer/applications/".concat(r._id,"/").concat(a)),state:{application:r,role:e.state.role}},onClick:function(){f(a),localStorage.setItem("selectedDocumentIndex",a)},children:Object(m.jsx)("div",{style:a===v?{backgroundColor:"var(--secondary-color)"}:null,children:t.requirementName})})},"requirement-list-li-".concat(a,"-").concat(t.requirementName))})),"reviewer"===e.state.role&&Object(m.jsx)("li",{children:Object(m.jsx)(p.b,{to:{pathname:"/reviewer/applications/".concat(r._id,"/receipt"),state:{application:r,role:e.state.role}},onClick:function(){f(100),localStorage.setItem("selectedDocumentIndex",100)},children:Object(m.jsx)("div",{style:100===v?{backgroundColor:"var(--secondary-color)"}:null,children:"receipt"})})})]})}),Object(m.jsxs)("div",{className:"document-photo-container",children:[r.transactionRequirements.map((function(t,a){return Object(m.jsxs)(d.a,{path:"applicant"===e.state.role?"/main/applications/".concat(r._id,"/").concat(a):"/reviewer/applications/".concat(r._id,"/").concat(a),children:["applicant"===e.state.role&&Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"file",id:"avatar",ref:P,accept:"image/*",onInput:function(){return function(e,t){var a=P.current.files[0],n=new FileReader;n.readAsDataURL(a),n.onloadend=function(){u.a.post("https://online-appointment-system-be.herokuapp.com/api/upload/document",{data:n.result}).then((function(a){var n=Object(y.a)(r.transactionRequirements);n[t]={requirementName:e.requirementName,requirementUrl:a.data,requirementStatus:"pending"},u.a.post("https://online-appointment-system-be.herokuapp.com/api/documents",{applicantId:r.applicantId,docType:e.requirementName,documentUrl:a.data,dateUploaded:Date.now()}),u.a.put("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(r._id),{transactionRequirements:n}).then((function(e){j(e.data)}))}))}}(t,a)}})}),Object(m.jsx)("img",{src:t.requirementUrl,alt:"document"})]},"route-".concat(t.requirementName,"-").concat(a))})),Object(m.jsx)(d.a,{path:"/reviewer/applications/".concat(r._id,"/receipt"),children:Object(m.jsx)("img",{src:r.paymentReceiptUrl,alt:"receipt"})})]})]}),"applicant"===e.state.role&&Object(m.jsxs)("div",{className:"send-application",children:[("-"===r.transactionStatus||"to resubmit requirements"===r.transactionStatus)&&Object(m.jsx)("button",{onClick:function(){u.a.put("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(r._id),{transactionStatus:"pending",transactionStatusUpdated:Date.now()}).then((function(e){j(e.data),L(),alert("Application has been sent for review")}))},children:"Send Application"}),"pending"===r.transactionStatus&&Object(m.jsx)("button",{onClick:function(){u.a.put("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(r._id),{transactionStatus:"-",transactionStatusUpdated:Date.now()}).then((function(e){j(e.data),L(),alert("Application has been cancelled")}))},children:"Cancel Application"}),"pending"!==r.transactionStatus||"-"!==r.transactionStatus&&Object(m.jsx)("span",{children:"Application sent!"})]}),Object(m.jsxs)("div",{className:"remarks-wrapper",children:[Object(m.jsxs)("div",{className:"application-remarks",children:[Object(m.jsx)("p",{className:"inner-header",children:"remarks"}),Object(m.jsx)("p",{className:"remarks",children:r.remarks})]}),Object(m.jsx)("div",{className:"reviewer-remarks",children:"reviewer"===e.state.role&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"reviewer-input-group",children:[Object(m.jsx)("label",{htmlFor:"reviewer-payment-status",children:"payment status"}),Object(m.jsxs)("select",{id:"reviewer-payment-status",value:I,onChange:function(e){return w(e.target.value)},children:[Object(m.jsx)("option",{value:"accepted",children:"accepted"}),Object(m.jsx)("option",{value:"rejected",children:"rejected"})]})]}),Object(m.jsxs)("div",{className:"reviewer-input-group",children:[Object(m.jsx)("label",{htmlFor:"reviewer-transaction-status",children:"transaction status"}),Object(m.jsxs)("select",{id:"reviewer-transaction-status",value:C,onChange:function(e){return T(e.target.value)},children:[Object(m.jsx)("option",{value:"set appointment date",children:"set appointment date"}),Object(m.jsx)("option",{value:"to resubmit requirements",children:"to resubmit requirements"})]})]}),Object(m.jsxs)("div",{className:"reviewer-input-group",children:[Object(m.jsx)("label",{htmlFor:"reviewer-remarks",children:"remarks"}),Object(m.jsx)("textarea",{name:"",id:"reviewer-remarks",cols:"30",rows:"10",value:R,onChange:function(e){return E(e.target.value)}})]}),Object(m.jsxs)("div",{className:"reviewer-input-group",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{className:"reviewer-status-button",children:Object(m.jsx)("button",{onClick:function(){var e;u()("https://online-appointment-system-be.herokuapp.com/api/applications/application-id/".concat(r._id)).then((function(t){e=t.data[0].transactionStatus})).then((function(a){"pending"===e?u.a.put("https://online-appointment-system-be.herokuapp.com/api/applications/".concat(r._id),{transactionStatus:C,paymentStatus:I,remarks:R}).then((function(e){j(e.data),alert("Application reviewed"),t.push("/reviewer/main")})):(alert("Applicant cancelled the application"),t.push("/reviewer/main"))}))},children:"Update Application"})})]})]})})]})]})},w=(a(75),function(){var e=Object(l.b)(),t=Object(d.f)(),a=Object(l.c)((function(e){return e.applicantInfoReducer.applicantInfo})),c=Object(l.c)((function(e){return e.applicationsReducer.applications})),i=Object(l.c)((function(e){return e.doctypesReducer.doctypes})),r=Object(n.useState)({requirements:[]}),s=Object(o.a)(r,2),p=s[0],j=s[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),O=h[0],x=h[1];return Object(m.jsx)("div",{className:"SetAppointment",children:Object(m.jsxs)("div",{className:"set-appointment-modal",children:[Object(m.jsxs)("div",{className:"select-title",children:[Object(m.jsx)("label",{htmlFor:"select-document",children:Object(m.jsx)("b",{children:"select document:"})}),Object(m.jsxs)("select",{name:"select-document",id:"select-document",onChange:function(e){x(e.target.value),j(i.find((function(t){return t.name===e.target.value})))},value:O,children:[Object(m.jsx)("option",{hidden:!0,children:"---select document---"}),i.map((function(e){return Object(m.jsx)("option",{children:e.name},"selecteddocoption-".concat(e.name))}))]})]}),Object(m.jsxs)("div",{className:"requirement-box",children:[Object(m.jsx)("div",{className:"requirement-title",children:Object(m.jsx)("b",{children:"requirements:"})}),Object(m.jsx)("div",{className:"requirement-list",children:Object(m.jsx)("ul",{children:p.requirements.map((function(e,t){return Object(m.jsx)("li",{children:e},"selecteddocreq-".concat(e._id,"-").concat(t))}))})})]}),Object(m.jsxs)("div",{className:"set-appointment-buttons",children:[Object(m.jsx)("button",{onClick:function(){var n=Object(y.a)(p.requirements.map((function(e){return{requirementName:e}})));u.a.post("https://online-appointment-system-be.herokuapp.com/api/applications",{applicantId:a._id,transactionDocument:p.name,amount:p.amount,transactionRequirements:n}).then((function(t){var a=[].concat(Object(y.a)(c),[t.data]);e({type:"INSERT_APPLICATIONS",payload:a})})),localStorage.setItem("highlightedNav","applications"),e({type:"EDIT_HIGHLIGHTED_NAV",payload:"applications"}),t.push("/main/applications")},children:"proceed"}),Object(m.jsx)("button",{onClick:function(){localStorage.setItem("highlightedNav","applications"),e({type:"EDIT_HIGHLIGHTED_NAV",payload:"applications"}),t.push("/main/applications")},children:"close"})]})]})})}),D=(a(76),function(){var e=Object(d.f)(),t=Object(l.b)(),a=Object(n.useRef)(null),c=Object(l.c)((function(e){return e.applicantInfoReducer.applicantInfo}));return Object(m.jsxs)("div",{className:"ApplicantTop",children:[Object(m.jsxs)("div",{className:"applicant-main-top",children:[Object(m.jsx)("div",{className:"avatar-container",children:Object(m.jsx)("img",{src:c.avatar,alt:"avatar"})}),Object(m.jsxs)("div",{className:"primary-info",children:[Object(m.jsx)("div",{className:"applicant-name",children:"".concat(c.firstName," ").concat(c.middleName," ").concat(c.lastName)}),Object(m.jsx)("div",{className:"applicant-email",children:c.email}),Object(m.jsx)("div",{className:"applicant-number",children:c.applicantNumber})]})]}),Object(m.jsxs)("div",{className:"applicant-main-bottom",children:[Object(m.jsx)("button",{className:"appointment-button",onClick:function(){e.push("/main/set-appointment")},children:"set appointment"}),Object(m.jsxs)("label",{className:"change-avatar-label",children:[Object(m.jsx)("input",{type:"file",className:"change-avatar-button",accept:"image/*",ref:a,onInput:function(){var e=a.current.files[0],n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){console.log(n.result),u.a.post("https://online-appointment-system-be.herokuapp.com/api/upload/avatar",{data:n.result}).then((function(e){u.a.put("https://online-appointment-system-be.herokuapp.com/api/applicants/".concat(c._id),{avatar:e.data}).then((function(e){t({type:"INSERT_APPLICANT_INFO",payload:e.data}),localStorage.setItem("applicantInfo",JSON.stringify(e.data))}))}))}}}),"change avatar"]})]})]})}),A=function(){var e=Object(d.f)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.highlightedNavReducer.highlightedNav}));null===localStorage.getItem("applicantInfo")&&e.push("/");return Object(m.jsxs)("div",{className:"MainPage",children:[Object(m.jsx)("header",{children:Object(m.jsx)("button",{onClick:function(){localStorage.removeItem("doctypes"),localStorage.removeItem("highlightedNav"),localStorage.removeItem("applicantInfo"),localStorage.removeItem("application"),localStorage.removeItem("applications"),localStorage.removeItem("documents"),localStorage.removeItem("pendingApplications"),localStorage.removeItem("selectedDocumentIndex"),e.push("/")},children:"logout"})}),Object(m.jsxs)("main",{children:[Object(m.jsx)(D,{}),Object(m.jsx)("nav",{className:"applicant-nav",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)(p.b,{to:"/main",onClick:function(){t({type:"EDIT_HIGHLIGHTED_NAV",payload:"profile"}),localStorage.setItem("highlightedNav","profile")},children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{style:"profile"===a?{backgroundColor:"var(--font-color)",color:"var(--secondary-color)"}:null,children:"profile"})})}),Object(m.jsx)(p.b,{to:"/main/documents",onClick:function(){t({type:"EDIT_HIGHLIGHTED_NAV",payload:"documents"}),localStorage.setItem("highlightedNav","documents")},children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{style:"documents"===a?{backgroundColor:"var(--font-color)",color:"var(--secondary-color)"}:null,children:"documents"})})}),Object(m.jsx)(p.b,{to:"/main/applications",onClick:function(){t({type:"EDIT_HIGHLIGHTED_NAV",payload:"applications"}),localStorage.setItem("highlightedNav","applications")},children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{style:"applications"===a?{backgroundColor:"var(--font-color)",color:"var(--secondary-color)"}:null,children:"applications"})})})]})}),Object(m.jsx)("div",{className:"applicant-details",children:Object(m.jsxs)(d.c,{children:[Object(m.jsx)(d.a,{path:"/main/applications/:_id",component:I}),Object(m.jsx)(d.a,{path:"/main/applications",render:function(){return Object(m.jsx)(N,{role:"applicant"})}}),Object(m.jsx)(d.a,{path:"/main/documents",component:f}),Object(m.jsx)(d.a,{path:"/main",component:v})]})})]}),Object(m.jsx)(d.a,{path:"/main/set-appointment",component:w})]})},C=(a(77),function(){var e=Object(l.b)(),t=Object(d.f)();return null===localStorage.getItem("pendingApplications")?t.push("/reviewer"):u()("https://online-appointment-system-be.herokuapp.com/api/applications/review/pending").then((function(t){e({type:"INSERT_PENDING_APPLICATIONS",payload:t.data}),localStorage.setItem("pendingApplications",JSON.stringify(t.data))})),Object(m.jsx)("div",{className:"ReviewerMainPage",children:Object(m.jsx)(N,{role:"reviewer"})})}),T=function(){var e=Object(l.b)();return null!==localStorage.getItem("doctypes")&&e({type:"INSERT_DOCTYPES",payload:JSON.parse(localStorage.getItem("doctypes"))}),null!==localStorage.getItem("applicantInfo")&&e({type:"INSERT_APPLICANT_INFO",payload:JSON.parse(localStorage.getItem("applicantInfo"))}),null!==localStorage.getItem("highlightedNav")&&e({type:"EDIT_HIGHLIGHTED_NAV",payload:localStorage.getItem("highlightedNav")}),null!==localStorage.getItem("applications")&&e({type:"INSERT_APPLICATIONS",payload:JSON.parse(localStorage.getItem("applications"))}),null!==localStorage.getItem("documents")&&e({type:"INSERT_DOCUMENTS",payload:JSON.parse(localStorage.getItem("documents"))}),null!==localStorage.getItem("pendingApplications")&&e({type:"INSERT_PENDING_APPLICATIONS",payload:JSON.parse(localStorage.getItem("pendingApplications"))}),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(d.c,{children:[Object(m.jsx)(d.a,{exact:!0,path:"/",render:function(e){return Object(m.jsx)(b,Object(s.a)(Object(s.a)({},e),{},{role:"applicant"}))}}),Object(m.jsx)(d.a,{path:"/main",component:A}),Object(m.jsx)(d.a,{path:"/register",component:h}),Object(m.jsx)(d.a,{exact:!0,path:"/reviewer",render:function(e){return Object(m.jsx)(b,Object(s.a)(Object(s.a)({},e),{},{role:"reviewer"}))}}),Object(m.jsx)(d.a,{path:"/reviewer/main",component:C}),Object(m.jsx)(d.a,{path:"/reviewer/applications",component:I})]})})},_=a(26),k={applicantInfo:{}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_APPLICANT_INFO":return Object(s.a)(Object(s.a)({},e),{},{applicantInfo:Object(s.a)({},t.payload)});default:return e}},E={applications:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_APPLICATIONS":return Object(s.a)(Object(s.a)({},e),{},{applications:Object(y.a)(t.payload)});default:return e}},L={pendingApplications:[]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_PENDING_APPLICATIONS":return Object(s.a)(Object(s.a)({},e),{},{pendingApplications:Object(y.a)(t.payload)});default:return e}},Y={doctypes:[]},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_DOCTYPES":return Object(s.a)(Object(s.a)({},e),{},{doctypes:Object(y.a)(t.payload)});default:return e}},M={highlightedNav:"profile"},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_HIGHLIGHTED_NAV":return Object(s.a)(Object(s.a)({},e),{},{highlightedNav:t.payload});default:return e}},U={documents:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_DOCUMENTS":return Object(s.a)(Object(s.a)({},e),{},{documents:Object(y.a)(t.payload)});default:return e}},J=Object(_.b)(Object(_.a)({applicantInfoReducer:R,applicationsReducer:P,pendingApplicationsReducer:F,doctypesReducer:q,highlightedNavReducer:H,documentsReducer:G}));r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(l.a,{store:J,children:Object(m.jsx)(p.a,{children:Object(m.jsx)(T,{})})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.4c2a0253.chunk.js.map